function wait(){var t=document.getElementById("wait-video");function o(){t.pause(),t.currentTime=0}var e=window.matchMedia("(orientation: portrait)");e.matches&&o(),e.addListener(function(e){e.matches?o():(t.play(),t.currentTime=0)})}function frontSlider(){if($(".step").length){$(".step-1__name").html($(".step-1__name").html()+'<div class="step-1__name-back">'+$(".step-1__name").html()+"</div>"),$(".step-1__desc").html($(".step-1__desc").html()+'<div class="step-1__desc-back">'+$(".step-1__desc").html()+"</div>");let t=$(".preloader__procent"),o=$(".preloader__img"),i=$(".preloader__progress"),n=9e3;console.log(n);let s=0,a=0,l=90;const c=new Swiper(".swiper",{direction:"vertical",effect:"fade",allowTouchMove:!0,enabled:!1,mousewheel:{forceToAxis:!0},breakpoints:{992:{allowTouchMove:!0}},pagination:{el:".swiper-pagi",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'"><span>0'+(e+1)+"</span></span>"}},on:{init:function(){}}});if($.cookie("load")){$("body").addClass("_go"),$(".step-1").addClass("swiper-slide-active");let e=document.getElementById("video-1");e.currentTime=0,e.play(),$.cookie("load","true"),c.enable(),$("body").addClass("_play-video")}else{$(".preloader").css("display","flex");let e=setInterval(function(){s+=100,t.text(parseInt(100/(n/s))+"%"),i.css("width",100/(n/s)+"%"),600==a?(console.log(l),a=0,pastTime=s,gsap.to(o,.3,{rotation:l,left:100/(n/s)+"%",ease:Power4.easOut,onComplete:function(){l+=90}})):a+=100,n<=s&&(clearInterval(e),$(".preloader").fadeOut(),setTimeout(function(){$("body").addClass("_go"),$(".step-1").addClass("swiper-slide-active");let e=document.getElementById("video-1");e.currentTime=0,e.play(),$.cookie("load","true"),c.enable(),$("body").addClass("_play-video")},200))},100);Pace.on("done",function(){n=s+2e3})}c.on("slideChange",function(){$(".step").each(function(e){console.log(e),e!=c.activeIndex?$(this).addClass("_no-anim"):$(this).find(".step__bg")[0].currentTime=0,setTimeout(function(){$(".step").removeClass("_no-anim")},100)})});let r=!1;c.on("slidePrevTransitionStart",function(e){console.log("slidePrevTransitionStart"),e.slideReset(0),r=r||!0}),$(".step__go").click(function(){$(this).hasClass("_up")?c.slidePrev():c.slideNext()}),$(".swiper-slide-active").removeClass("swiper-slide-active"),c.mousewheel.disable(),c.on("beforeSlideChangeStart",function(e){c.mousewheel.disable(),$("body").addClass("_play-video")}),$(".step__bg").on("ended",function(){setTimeout(function(){$("body").removeClass("_play-video"),$(window).width()<992?c.allowTouchMove=!0:c.mousewheel.enable()},50)}),c.on("slideChange",function(e){$(window).width()<992?c.allowTouchMove=!1:c.mousewheel.disable(),$("body").addClass("_play-video");let t=e.slides[e.activeIndex].querySelector(".step__bg");t.currentTime=0,$('.swiper-slide:not(".swiper-slide-active") .step__bg').each(function(){this.currentTime=0}),t.play(),isPlaying=!0})}}function publications(){var e;$(".publications").length&&(console.log("sadas"),e=document.querySelector(".publications__row"),mixitup(e)),$(".video-popup__close , .video-popup__overlay").click(function(e){e.preventDefault();let t=$(this).closest(".video-popup");t.fadeOut(),t.find(".video-popup__wrap").html()}),$("._video-popup").click(function(e){e.preventDefault();let t=$($(this).attr("href"));t.find(".video-popup__wrap").html(t.find(".video-popup__hidden").html()),t.fadeIn()})}function cursor(){let e=$("body"),n=$(".cursor"),s=$(".step-1__name"),a=$("#rombS1name rect"),l=$(".step-1__desc"),r=$("#rombS1desc rect"),c=$("#rombinvert rect");if($("._hover-social").each(function(){$(this).html($(this).html()+'<div class="_hover-social-back">'+$(this).html()+"</div>"),$(this).hover(function(){e.addClass("_hover-soc"),n.addClass("_hover-soc")},function(){e.removeClass("_hover-soc"),n.removeClass("_hover-soc")})}),$("._hover-publication").html($("._hover-publication").html()+'<div class="_hover-publication-back">'+$("._hover-publication").html()+"</div>"),$("._hover-publication").hover(function(){e.addClass("_hover-public"),n.addClass("_hover-public")},function(){e.removeClass("_hover-public"),n.removeClass("_hover-public")}),$(".container a, .step__content a, .step__content button, ._hover").hover(function(){e.addClass("_hover-it"),n.addClass("_hover-it")},function(){e.removeClass("_hover-it"),n.removeClass("_hover-it")}),window.matchMedia("(min-width: 991px)").matches){let o,i;$(document).on("mousemove",function(t){o=t.pageX,i=t.pageY,$("._hover-publication").each(function(){if(this.matches(":hover")){gsap.to(c,.3,{x:t.pageX-$(this).offset().left+4,y:t.pageY-$(this).offset().top-16,ease:Power4.easOut});let e=$(this);setTimeout(function(){gsap.to(c,.3,{x:o-e.offset().left+4,y:i-e.offset().top-16,ease:Power4.easOut})},300)}}),$("._hover-social").each(function(){this.matches(":hover")&&gsap.to(c,.3,{x:t.pageX-$(this).offset().left+4,y:t.pageY-$(this).offset().top-16,ease:Power4.easOut})}),s.length&&gsap.to(a,.3,{x:t.pageX-s.offset().left+5,y:t.pageY-s.offset().top-55,ease:Power4.easOut}),r.length&&gsap.to(r,.3,{x:t.pageX-l.offset().left+5,y:t.pageY-l.offset().top-55,ease:Power4.easOut}),gsap.to(n,.3,{left:t.pageX+5,top:t.pageY+5,ease:Power4.easOut})})}}function orientation(){function t(){let e=document.querySelector(".swiper-slide-active .step__bg");e.pause()}var e=window.matchMedia("(orientation: portrait)");e.matches&&t(),e.addListener(function(e){(e.matches?t:function(){let e=document.querySelector(".swiper-slide-active .step__bg");e.play()})()})}function parallax(){$.fn.parallax=function(e,t){$el=$(this),TweenLite.to($el,.2,{x:-(t.clientX-window.innerWidth/2)/e,y:-(t.clientY-window.innerHeight/2)/e})},$(document).mousemove(function(e){992<$(window).width()&&$("[data-parallax]").each(function(){$(this).parallax($(this).data("parallax"),e)})})}$(function(){cursor(),parallax(),frontSlider(),orientation(),publications()});var vh=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${vh}px`);var width=window.innerWidth;window.addEventListener("resize",()=>{var e;width!=window.innerWidth&&(e=.01*window.innerHeight,document.documentElement.style.setProperty("--vh",`${e}px`),width=window.innerWidth)});